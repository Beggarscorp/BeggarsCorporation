(function(){var r=window.angular,e=r.module("com.td.tdi.uapWeb","com.td.tdi.otpWeb com.td.oca.alertBrowseHappy com.td.oca.coreI18n com.td.oca.coreRouter com.td.oca.uiNavigation com.td.oca.brandingThemeSwitcher ngCookies ngAria".split(" ")),x={easyweb:"app.login.easyweb-getting-started",webbroker:"app.login.webbroker-getting-started",wbrad:"app.login.webbroker-getting-started",securekey:"app.login.secure.secure-login",generic:"app.login.secure.generic-login"};e.constant("UAP_CONSTANTS",{DEFAULT_STATE:"app.login.secure.generic-login",
HEADER_DOMAIN:"domainName",HEADER_LOCALE:"Accept-Language",HEADER_TEST_SET:"ConsumerApplication.From.Address",COOKIE_AUTHENTICATION_CONTEXT:"authenticationContextInfo",COOKIE_OG_DOMAIN:"td.com",COOKIE_OG_REQUIRED:"ogRequired",COOKIE_OG_NAME:"ogCookieName",COOKIE_RESUME_PATH:"resumePath",THIRD_PARTY_RETURN:"thirdParty",CONFIGURATION_LOOKUP_URI:"configuration-lookup",FORM_NAME_LOCALE:"locale",FORM_NAME_REFERENCE_ID:"referenceId",FORM_NAME_REFERENCE_ID_PING:"REF",CONSUMER_KEY:"consumer",LOCALE_KEY:"locale"});
e.constant("CONSUMER_TITLES",{easyweb_en_CA:"EasyWeb Login",easyweb_fr_CA:"Se connecter \x26agrave; BanqueNet",webbroker_en_CA:"WebBroker Login",webbroker_fr_CA:"Se connecter \x26agrave; CourtierWeb",wbrad_en_CA:"WebBroker Login",wbrad_fr_CA:"Se connecter \x26agrave; CourtierWeb",generic_en_CA:"TD Login",generic_fr_CA:"Se connecter \x26agrave; TD"});e.factory("uapHttpInterceptor",["$rootScope","$injector","UAP_CONSTANTS",function(c,t,m){return{request:function(f){if(r.isUndefined(c.consumer))for(var b=
window.location.search.substring(1).split("\x26"),p=0;p<b.length;p++){var e=b[p].split("\x3d");"consumer"==decodeURIComponent(e[0])&&(c.consumer=e[1])}b=t.get("$translate");f.headers[m.HEADER_LOCALE]=b.use();f.headers[m.HEADER_DOMAIN]=c.consumer;if(f.url.startsWith("/uap-ui/translations/")||f.url.startsWith("/uap-ui/fragments/"))b=f.url.split("/"),b.splice(b.length-1,0,"cacheable"),b.splice(b.length-1,0,c.consumer),f.url=b.join("/");return f}}}]);e.config(["$httpProvider","$translateProvider","$translatePartialLoaderProvider",
"$compileProvider",function(c,e,m,f){c.interceptors.push("uapHttpInterceptor");f.debugInfoEnabled(!1)}]);e.service("configurationService",["$http","$q","UAP_CONSTANTS",function(c,e,m){this.getConfigurationValues=function(){var f=e.defer();c({method:"GET",url:m.CONFIGURATION_LOOKUP_URI}).success(function(c,e,m,h){f.resolve(c)});return f.promise}}]);e.run(["$rootScope","$cookies","$http","$translate","$translatePartialLoader","$state","$transitions","OTP_UTIL","UAP_CONSTANTS","configurationService",
"$timeout","CONSUMER_TITLES",function(c,e,m,f,b,p,y,h,g,k,u,v){var t={CHALLENGE_SETUP:{name:"app.mfa-setup",data:{}},CHALLENGE_UPDATE:{name:"app.mfa-update",data:{}},CHALLENGE_OTP_SETUP_CONSENT:{name:"app.setup.existing-new-customer",data:{}},OTP_UPDATE:{name:"app.setup.setup-complete",data:{update:!0,flowMode:h.FLOW_MODES.otpUpdateFlow}},PASSWORD_EXPIRED:{name:"app.maintenance.update-password",data:{isCustomer:!0}},FORGOT_PASSWORD:{name:"app.reset.username-password-help",data:{}}};k=e.get(g.COOKIE_AUTHENTICATION_CONTEXT).split("\x26");
var q={};for(b=0;b<k.length;b++){var l=k[b].split("\x3d");q[l[0]]=l[1]}u(function(){var a=uap.configuration.configurationValues,d;for(d in a)for(var b in a[d])a[d].hasOwnProperty(b)&&(c[b]=a[d][b]);m.defaults.headers.common[g.HEADER_DOMAIN]=c.consumer;r.isUndefined(c.tsnConsumerAppId)||"null"==c.tsnConsumerAppId||(m.defaults.headers.common[g.HEADER_TEST_SET]=c.tsnConsumerAppId);if(-1< !window.location.search.indexOf(g.LOCALE_KEY)&&-1< !window.location.search.indexOf(g.CONSUMER_KEY)){a={};a[g.CONSUMER_KEY]=
c.consumer;a[g.LOCALE_KEY]=c.lang;d=document.location.search.substr(1).split("\x26");void 0===d&&d==[];for(var n in a){b=a[n];n=escape(n);b=escape(b);for(var h=d.length,k;h--;)if(k=d[h].split("\x3d"),k[0]==n){k[1]=b;d[h]=k.join("\x3d");break}0>h&&(d[d.length]=[n,b].join("\x3d"))}d=d.filter(function(a){return""!==a});document.location.search=d.join("\x26")}f.use()!==c.lang&&f.use(c.lang);n=x[c.consumer];a=function(){u(function(){var a=q.ec;a&&"undefined"!==a&&"null"!==a&&c.$broadcast("initialError.ec",
a)})};d=e.get("uap_function");var l;d&&(l=t[d.toUpperCase()]);l?p.go(l.name,l.data):n?p.baseGo(n).then(a):p.baseGo(g.DEFAULT_STATE).then(a)});var w=function(a,d){w=function(){};"true"==q[g.COOKIE_OG_REQUIRED]&&(document.cookie=q[g.COOKIE_OG_NAME]+"\x3d"+d.sessionToken+"; path\x3d/; domain\x3d"+g.COOKIE_OG_DOMAIN);if(q[g.COOKIE_RESUME_PATH]==g.THIRD_PARTY_RETURN){a=$("\x3cform\x3e",{id:"shibbolethTransferOutForm",method:"post",action:window.location.protocol+"//"+window.location.hostname+c.ThirdPartyResumePath});
var b=$("\x3cinput\x3e").attr("type","hidden"),e=$("\x3cinput\x3e").attr("type","hidden");$(b).attr("name",g.FORM_NAME_REFERENCE_ID);$(e).attr("name",g.FORM_NAME_LOCALE);$(b).val(d.REF);$(e).val(f.use());a=a.append(b);a=a.append(e);a.appendTo(document.body).submit()}else if("ropc"===c.authenticationFlowType){a="uap_locale\x3d"+f.use()+"; path\x3d/; domain\x3d.td.com";document.cookie=a;(a=c.redirect_uri)||(a=c["redirect_uri_default_"+f.use()]);d=$("\x3cform\x3e",{id:"transferOutForm",method:"post",
action:a});a=$("\x3cinput\x3e").attr("type","hidden");$(a).attr("name","LN");$(a).val(f.use());d=d.append(a);if(a=c.additionalParams)for(b in a)a.hasOwnProperty(b)&&(e=$("\x3cinput\x3e").attr("type","hidden"),$(e).attr("name",b),$(e).val(a[b]),d=d.append(e));d.appendTo(document.body).submit()}else a="uap_locale\x3d"+f.use()+"; path\x3d/; domain\x3d.td.com",document.cookie=a,a=c.Ping_Domain+q[g.COOKIE_RESUME_PATH],a=$("\x3cform\x3e",{id:"pingTransferOutForm",method:"get",action:a}),b=$("\x3cinput\x3e").attr("type",
"hidden"),$(b).attr("name",g.FORM_NAME_REFERENCE_ID_PING),$(b).val(d.REF),a=a.append(b),a.appendTo(document.body).submit()};k=function(a){a=$("\x3cform\x3e",{id:"cancelOutForm",method:"post",action:window.location.protocol+"//"+window.location.hostname+c.ThirdPartyResumePath});var b=$("\x3cinput\x3e").attr("type","hidden");$(b).attr("name",g.FORM_NAME_LOCALE);$(b).val(f.use());a=a.append(b);a.appendTo(document.body).submit()};l=[h.EVENTS.authSuccessEvent];h=[h.EVENTS.loginCancelled];for(b=0;b<l.length;b++)c.$on(l[b],
w);for(b=0;b<h.length;b++)c.$on(h[b],k);c.$on("$translateChangeSuccess",function(a,b,e){(a=v[c.consumer+"_"+b.language])?document.querySelector("title").innerHTML=a:document.querySelector("title").innerHTML=v["generic_"+b.language]});y.onStart({},function(a){if("index"===a.to().name)return!1})}])})();
//# sourceMappingURL=uap-application.min.js.map