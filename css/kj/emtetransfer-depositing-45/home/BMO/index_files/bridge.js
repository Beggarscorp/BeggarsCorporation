!function(e){e.BRIDGE_VERSION||(e.BRIDGE_VERSION="2.0"),e.utf8_to_b64||(e.utf8_to_b64=function(e){return window.btoa?window.btoa(unescape(encodeURIComponent(e))):e}),e.b64_to_utf8||(e.b64_to_utf8=function(e){return window.atob?decodeURIComponent(escape(window.atob(e))):e}),e.checkBMODomain||(e.checkBMODomain=function(e){var o=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i),n=o&&o[1];if(null===n)return!1;var t=n.split(".");return t.length>2&&t.splice(0,t.length-2),"bmo.com"===t.join(".")}),e.bmoReceiveMessage||(e.bmoReceiveMessage=function(o){if(o.origin&&e.checkBMODomain(o.origin)&&o.data&&"string"===(typeof o.data).toLowerCase())try{var n=e.b64_to_utf8(o.data),t=JSON.parse(n);e.receiveBMOData&&"function"==typeof e.receiveBMOData&&e.receiveBMOData(t)}catch(e){console.error(e)}}),e.bmoReceiveMessageAndroid||(e.bmoReceiveMessageAndroid=function(o){try{var n=JSON.parse(o);e.receiveBMOData&&"function"==typeof e.receiveBMOData&&e.receiveBMOData(n)}catch(e){console.error(e)}}),e.bmoReceiveMessageIOS||(e.bmoReceiveMessageIOS=function(o){try{var n=JSON.parse(o);e.receiveBMOData&&"function"==typeof e.receiveBMOData&&e.receiveBMOData(n)}catch(e){console.error(e)}}),e.bmoSendMessage||(e.bmoSendMessage=function(o){var n,t=JSON.stringify(o);e._child?(n=e.utf8_to_b64(t),e._child.postMessage(n,"*")):window.top&&window.top.opener&&(n=e.utf8_to_b64(t),window.top.opener.postMessage(n,"*")),window.AndroidJSInterface&&window.AndroidJSInterface.bmoAndroidBridge&&(n=t,window.AndroidJSInterface.bmoAndroidBridge(n)),window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.bmoIOSBridge&&(n=t,window.webkit.messageHandlers.bmoIOSBridge.postMessage(n))},e.sendBMOData=e.bmoSendMessage),e._child,e.openWindow=function(o,n){return window.top&&window.top.opener&&(window.top.opener._child=null,window.top.opener=null),e._child=window.open(o,n),e._child},e.removeEventListener("message",e.bmoReceiveMessage),e.addEventListener("message",e.bmoReceiveMessage),e.addEventListener("beforeunload",function(o){e.removeEventListener("message",e.bmoReceiveMessage)})}(window);